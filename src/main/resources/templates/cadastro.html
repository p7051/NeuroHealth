<!DOCTYPE html>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/Other/html.html to edit this template
-->

<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
    xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles_cadastro_paciente.css">
    <link rel="stylesheet" href="styles.css">
    <title>NeuroHealth - Cadastro de Paciente</title>
</head>

<body>

    <header>
        <div class="logo">
            <img src="/imagens/neurohealth_logo.png" alt="NeuroHealth Logo">
            <h1>NeuroHealth</h1>
        </div>
        <nav>
            <ul>
                <li><a href="/login">Login</a></li>
                <li><a href="/index_pacientes">Lista Pacientes</a></li>
                <li><a href="/">Sair</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="formulario-cadastro">
            <h2>Cadastro de Novo Paciente</h2>
            <form action="/processar_cadastro" method="post">
                <label for="nome">Nome:</label>
                <input type="text" id="nome" name="nome" required>

                <label for="data_nascimento">Data de Nascimento:</label>
                <input type="date" id="data_nascimento" name="data_nascimento" required>

                <label for="cpf">CPF:</label>
                <input type="text" id="cpf" name="cpf" required>

                <label for="rg">RG:</label>
                <input type="text" id="rg" name="rg" required>

                <label for="telefone">Telefone:</label>
                <input type="tel" id="telefone" name="telefone" required>

                <label for="endereco">Endereço:</label>
                <input type="text" id="endereco" name="endereco" required>

                <label for="sexo">Sexo:</label>
                <select id="sexo" name="sexo" required>
                    <option value="masculino">Masculino</option>
                    <option value="feminino">Feminino</option>
                    <option value="outro">Outro</option>
                </select>

                <label for="convenio_particular">Convênio ou Particular:</label>
                <select id="convenio_particular" name="convenio_particular" required>
                    <option value="convenio">Convênio</option>
                    <option value="particular">Particular</option>
                </select>

                <label for="uso_medicacao">Uso de Medicação:</label>
                <input type="text" id="uso_medicacao" name="uso_medicacao">

                <button class="botao-neurohealth" type="submit">Cadastrar</button>
            </form>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 NeuroHealth. Todos os direitos reservados.</p>
    </footer>
        <script>
    document.addEventListener("DOMContentLoaded", function () {
    const form = document.querySelector('form');

    form.addEventListener('submit', function (event) {
        // Validação do CPF
        const cpfInput = document.getElementById('cpf');
        if (!validarCPF(cpfInput.value)) {
            alert('CPF inválido. Certifique-se de inserir um CPF válido.');
            event.preventDefault(); // Impede o envio do formulário
        }
    });

    // Função para validar CPF
    function validarCPF(cpf) {
        // Remove caracteres não numéricos
        cpf = cpf.replace(/\D/g, '');

        // Verifica se o CPF tem 11 dígitos
        if (cpf.length !== 11) {
            return false;
        }

        const cpfArray = cpf.split('').map(Number);

        // Calcula o primeiro dígito verificador
        let sum = 0;
        for (let i = 0; i < 9; i++) {
            sum += cpfArray[i] * (10 - i);
        }
        let remainder = 11 - (sum % 11);
        cpfArray[9] = (remainder === 10 || remainder === 11) ? 0 : remainder;

        // Calcula o segundo dígito verificador
        sum = 0;
        for (let i = 0; i < 10; i++) {
            sum += cpfArray[i] * (11 - i);
        }
        remainder = 11 - (sum % 11);
        cpfArray[10] = (remainder === 10 || remainder === 11) ? 0 : remainder;

        // Verifica se os dígitos calculados coincidem com os dígitos informados
        return cpfArray[9] === cpfArray[9] && cpfArray[10] === cpfArray[10];
    }
});
</script>
</body>

</html>